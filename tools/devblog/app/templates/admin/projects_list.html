<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Projects - Admin</title>
  </head>
  <body>
    <h1>Projects</h1>
    <p><a href="/admin/projects/create">Create new project</a></p>
    {% if projects %}
      <table border="1" cellpadding="6">
        <tr><th>ID</th><th>Name</th><th>Repo</th><th>AI</th><th>Chat ID</th><th>Actions</th></tr>
        {% for p in projects %}
        <tr>
          <td>{{ p.id }}</td>
          <td>{{ p.name }}</td>
          <td>{{ p.repo_full_name }}</td>
          <td>{{ p.ai_enabled }}</td>
          <td>{{ p.telegram_chat_id }}</td>
          <td>
            <a href="/admin/projects/{{ p.id }}/edit">Edit</a>
            <form method="post" action="/admin/projects/{{ p.id }}/toggle-ai" style="display:inline">
              <button type="submit">Toggle AI</button>
            </form>
            <form method="post" action="/admin/projects/{{ p.id }}/delete" style="display:inline" onsubmit="return confirm('Delete project?');">
              <button type="submit">Delete</button>
            </form>
          </td>
        </tr>
        {% endfor %}
      </table>
    {% else %}
      <p>No projects yet.</p>
    {% endif %}
  </body>
</html>
